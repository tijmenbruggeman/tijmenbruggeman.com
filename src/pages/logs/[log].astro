---
import LogLayout from '../../layouts/LogLayout.astro';
import NotionBlock from '@components/NotionBlock.astro';
import { queryDatabase } from '../../notion';

export async function getStaticPaths() {
    // retrieve content from database notion
    const logPosts = await queryDatabase();
    return logPosts.map((logPost) => ({
        params: {
            log: logPost.slug,
        },
        props: logPost,
    }));
}

const { title, children } = Astro.props;
---
<LogLayout title={title}>
    <h1 class="page-title">{title}</h1>
    <section class="page-content">
        {children.map((c => <NotionBlock block={c} />))}
    </section>
</LogLayout>